<% layout('layouts/boilerplate')%>
    <div class="row">
        <h1>
            <%=ingredient.name%>:
        </h1>
        <h2>Add an Item</h2>
        <form class="row gy-2 gx-3 align-items-center" action="/ingredients/<%=ingredient._id%>/items/newIngredient"
            method="POST">
            <div class="mb-3 col-auto">
                <label for="title">Title</label>
                <input type="text" id='title' name='item[title]'>
            </div>
            <div class="mb-3 col-auto">
                <label for="location">location</label>
                <input type="text" id='location' name='item[location]'>
            </div>
            <div class="mb-3 col-auto">
                <label for="upc">upc: </label>
                <input type="number" id='upc' name='item[upc]'>
            </div>
            <div class="mb-3 col-auto">
                <label for="quantity">quantity</label>
                <input type="number" id='quantity' name='item[quantity]' min=1 value=1>
            </div>
            <div class="mb-3 col-auto">
                <label for="quantityType">quantity type</label>
                <input type="text" id='quantityType' name='item[quantityType]'>
            </div>
            <div class="mb-3 col-auto">
                <label for="price">price</label>
                <input type="text" id='price' name='item[price]'>
            </div>
            <div class="mb-3 col-auto">
                <label for="caseQty">case quantity</label>
                <input type="number" id='caseQty' name='item[caseQty]'>
            </div>
            <div class="mb-3 col-auto">
                <label for="date">Date of Purchase</label>
                <input type="date" id='date' name='item[date]' value='<%=todaysDate(new Date())%>'>
            </div>
            <div class="mb-3 col-auto">
                <label for="shelfLife">Shelf Life in Days</label>
                <input type="number" id='shelfLife' name='item[shelfLife]' min=1>
            </div>
            <div class="mb-3 col-auto">
                <label for="expiration_date">expiration date</label>
                <input type="date" id="expiration_date" name="item[expiration_date]" min=1>
            </div>
            <div class="mb-3 col-auto">
                <button class="btn btn-success">Add Item</button>
            </div>
    </div>


    <div class="row">
        <h2>Already existing Items</h2>
        <% for (let item of existingItemsArray) { %>
            <div class="mb-3 col-auto">
                <a href="/ingredients/<%=item._id%>" class="btn btn-primary">
                    <%=item.title%>
                </a>
                <li>
                    <%=item.quantity%>
                        <%=item.quantityType%>
                </li>
            </div>
            <% } %>
    </div>
    <div class="row">
        <div class="mb-3 mt-3 col-auto">
            <h2>Items</h2>
            <% allItems.forEach(function(item, i) {%>
                <div class="col-auto form-check-inline">
                    <ul>
                        <li>
                            <%=item.title%>
                        </li>
                        <div class="form-check-inline">
                            <input type="checkbox" id="ing-<%=i%>" name="addItems[]" value="<%=item._id%>">
                        </div>
                        <label for="ing-<%=i%>">Attach Item to Ingredient?</label>
                    </ul>
                </div>
                <% }) %>
        </div>
    </div>

    </form>
    <a class="btn btn-primary btn-lg mb-3" href="/ingredients/<%=ingredient._id%>/">Back to <%=ingredient.name%></a>